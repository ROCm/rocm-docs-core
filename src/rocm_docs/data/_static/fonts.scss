@function fontSuffix-lower($list) {
  @if length($list) == 0 {
    @return "-regular";
  } @else {
    $result: to-lower-case(nth($list, 1));
    @if length($list) > 1 {
      @for $i from 2 through length($list) {
        $result: $result + "-" + to-lower-case(nth($list, $i));
      }
    }
    @return "-" + $result;
  }
}

@function fontSuffix-upper($list) {
  @if length($list) == 0 {
    @return "-Regular";
  } @else {
    $result: nth($list, 1);
    @if length($list) > 1 {
      @for $i from 2 through length($list) {
        $result: $result + nth($list, $i);
      }
    }
    @return "-" + $result;
  }
}

@mixin klavika-font($fontType: "") {
  $sizes: (
    "Light": 300,
    "Normal": 400,
    "Medium": 500,
    "Bold": 700,
  );
  @each $weightName, $weight in $sizes {
    $fontSuffix-list: ();
    @if ($weightName != "Normal") {
      $fontSuffix-list: append($fontSuffix-list, $weightName);
    }
    $fontName: "Klavika";
    @if ($fontType != "") {
      $fontSuffix-list: append($fontSuffix-list, $fontType);
      $fontName: "Klavika " + $fontType;
    }

    @each $style in ("normal", "Italic") {
      $fontSuffix-style: $fontSuffix-list;
      @if ($style != "normal") {
        @if $fontType == "" and $weightName == "Normal" {
          $fontSuffix-style: join(("Regular"), $fontSuffix-style);
        }
        $fontSuffix-style: append($fontSuffix-style, $style);
      }
      $fontPath: "./fonts/klavika/klavika" +
        fontSuffix-lower($fontSuffix-list) +
        "/Klavika" +
        fontSuffix-upper($fontSuffix-style);
      @font-face {
        font-display: swap;
        font-family: unquote($fontName);
        font-style: unquote(to-lower-case($style));
        font-weight: $weight;
        src: url(unquote($fontPath + ".eot"));
        src: url(unquote($fontPath + ".eot#iefix")) format("embedded-opentype"),
          url(unquote($fontPath + ".woff")) format("woff"),
          url(unquote($fontPath + ".ttf")) format("truetype");
      }
    }
  }
}

@include klavika-font("Condensed");
@include klavika-font("");

@function fontPath($weight, $style, $ext: false) {
  $result: "./fonts/open-sans/open-sans-v34-latin-";
  @if $ext {
    $result: $result + "ext-";
  }
  @if $weight == 400 {
    @if $style == "normal" {
      $result: $result + "regular";
    }
  } @else {
    $result: $result + $weight;
  }
  @if $style != "normal" {
    $result: $result + $style;
  }
  @return $result + ".woff";
}

@each $ext in (false, true) {
  @each $style in ("normal", "italic") {
    @each $weight in (300, 400, 500, 600, 700, 800) {
      $fontPath: fontPath($weight, $style, $ext);
      $unicodeRange: (
        u+00??,
        u+0131,
        u+0152-0153,
        u+02bb-02bc,
        u+02c6,
        u+02da,
        u+02dc,
        u+2000-206f,
        u+2074,
        u+20ac,
        u+2122,
        u+2191,
        u+2193,
        u+2212,
        u+2215,
        u+feff,
        u+fffd
      );
      @if $ext {
        $unicodeRange: (
          u+0100-024f,
          u+0259,
          u+1e??,
          u+2020,
          u+20a0-20ab,
          u+20ad-20cf,
          u+2113,
          u+2c60-2c7f,
          u+a720-a7ff
        );
      }
      @font-face {
        font-display: swap;
        font-family: Open Sans;
        font-style: unquote($style);
        font-weight: $weight;
        src: local(""), url(unquote($fontPath + "2")) format("woff2"),
          url(unquote($fontPath)) format("woff");
        unicode-range: $unicodeRange;
      }
      $fontPath: fontPath($weight, $style, true);
    }
  }
}
